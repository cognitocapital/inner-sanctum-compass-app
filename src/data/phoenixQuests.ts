// The Phoenix Path: Quest-Based Recovery System
// Maps manuscript chapters, breathing, challenges, reflections, and toolkits into flexible quests

export type QuestType = 'narrative' | 'breathing' | 'cold' | 'cognitive' | 'mindfulness' | 'reflection' | 'toolkit' | 'echo' | 'physical' | 'rest';
export type QuestPhase = 1 | 2 | 3 | 4;
export type PhaseKey = 'ashes' | 'forge' | 'ascent' | 'soar';

export interface QuestDefinition {
  key: string;
  type: QuestType;
  phase: QuestPhase;
  title: string;
  description: string;
  xpReward: number;
  estimatedMinutes: number;
  bookChapterRef?: number;
  symptomTags: string[];
  chapterPath?: string;
  audioPath?: string;
  breathingPattern?: {
    name: string;
    inhale: number;
    hold: number;
    exhale: number;
    pause: number;
    duration: number;
    safetyNote?: string;
  };
  challenge?: {
    type: string;
    name: string;
    description: string;
    duration: string;
    intensity: 'gentle' | 'moderate' | 'progressive';
    safetyNote?: string;
  };
  reflectionPrompt?: string;
  toolkitSteps?: string[];
  manuscriptExcerpt?: string;
  quote?: string;
  scienceNote?: string;
  selfCompassionPrompt?: string;
}

export interface PhaseInfo {
  phase: QuestPhase;
  key: PhaseKey;
  name: string;
  subtitle: string;
  description: string;
  flameThreshold: number; // flame strength needed to unlock (0 for phase 1)
  accentColor: string; // HSL accent
}

export const PHASES: PhaseInfo[] = [
  {
    phase: 1,
    key: 'ashes',
    name: "The Ashes",
    subtitle: "Survival & Awakening",
    description: "From the depths, a spark remains. Ground yourself, accept where you are, and take the first steps.",
    flameThreshold: 0,
    accentColor: "35 80% 50%", // amber
  },
  {
    phase: 2,
    key: 'forge',
    name: "The Forge",
    subtitle: "Rebuilding & Emotional Work",
    description: "In the heat of transformation, rebuild your emotional and cognitive foundations.",
    flameThreshold: 80,
    accentColor: "15 85% 55%", // deep orange-red
  },
  {
    phase: 3,
    key: 'ascent',
    name: "The Ascent",
    subtitle: "Independence & Inner Work",
    description: "Rise higher through self-discovery, mindfulness, and reclaiming your autonomy.",
    flameThreshold: 80,
    accentColor: "45 90% 55%", // gold
  },
  {
    phase: 4,
    key: 'soar',
    name: "The Soar",
    subtitle: "Legacy & Thriving",
    description: "Spread your wings. Find meaning, share your story, and help others rise.",
    flameThreshold: 80,
    accentColor: "200 80% 60%", // sky blue
  },
];

export const PHOENIX_QUESTS: QuestDefinition[] = [
  // ========================================
  // PHASE 1: THE ASHES (Survival & Awakening)
  // ========================================

  // Narrative Quests
  {
    key: "narrative_ch1",
    type: "narrative",
    phase: 1,
    title: "Australia Day",
    description: "The day everything changed. Read Michael's story of the moment life turned upside down.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 1,
    symptomTags: [],
    chapterPath: "/chapter-1",
    audioPath: "/audio/chapter1.mp3",
    quote: "I had no idea that this would be my last moment of bliss before my world turned upside down.",
    manuscriptExcerpt: "What a journey. My life, my world, everything I knew changed in an instant...",
    reflectionPrompt: "What moment changed everything for you? Take your time to remember.",
    scienceNote: "The brain's neuroplasticity begins immediately after injury. Even small actions help rewire neural pathways.",
    selfCompassionPrompt: "It's okay to rest. Recovery is not a race.",
  },
  {
    key: "narrative_ch2",
    type: "narrative",
    phase: 1,
    title: "Hospital Daze",
    description: "Navigating the fog of post-traumatic amnesia and finding acceptance in confusion.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 2,
    symptomTags: ["memory", "cognitive_fog"],
    chapterPath: "/chapter-2",
    audioPath: "/audio/chapter2.mp3",
    quote: "The fog was thick, but I was still in there, somewhere.",
    manuscriptExcerpt: "Waking up and wondering where I am has become my new normal...",
    reflectionPrompt: "What fog am I sitting in right now? Can I accept it without fighting?",
    scienceNote: "Post-traumatic amnesia is common. The brain protects itself by limiting processing.",
    selfCompassionPrompt: "Confusion is not weakness—it's your brain healing.",
  },
  {
    key: "narrative_ch3",
    type: "narrative",
    phase: 1,
    title: "The Gun to My Head",
    description: "Confronting overwhelming pressure and learning to sit with discomfort.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 3,
    symptomTags: ["emotional"],
    chapterPath: "/chapter-3",
    audioPath: "/audio/chapter3.mp3",
    quote: "The overwhelming chaos that eventually gives way to peace...",
    manuscriptExcerpt: "A gun to the head, metaphorically speaking—the overwhelming pressure of everything at once...",
    reflectionPrompt: "What am I afraid of facing? Can I look at it for just one moment?",
    scienceNote: "Controlled stress exposure builds resilience. Small doses strengthen the nervous system.",
    selfCompassionPrompt: "Facing fear takes courage. You're doing it.",
  },
  {
    key: "narrative_ch4",
    type: "narrative",
    phase: 1,
    title: "Finding My Footing",
    description: "One step at a time. The journey back to walking, moving, and living.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 4,
    symptomTags: ["balance", "fatigue"],
    chapterPath: "/chapter-4",
    audioPath: "/audio/chapter4.mp3",
    quote: "One step, then another. That's all recovery asks.",
    manuscriptExcerpt: "Walking was the first thing I focused on. One foot in front of the other...",
    reflectionPrompt: "What one thing am I grateful for today? Write it down.",
    scienceNote: "Walking stimulates neurogenesis—the creation of new brain cells.",
    selfCompassionPrompt: "Every step forward counts, no matter how small.",
  },

  // Breathing Quests - Phase 1
  {
    key: "breathing_grounding",
    type: "breathing",
    phase: 1,
    title: "4-4 Grounding",
    description: "The simplest breath. Four counts in, four counts out. Perfect for overwhelm.",
    xpReward: 40,
    estimatedMinutes: 5,
    symptomTags: ["fatigue", "emotional"],
    breathingPattern: { name: "4-4 Grounding", inhale: 4, hold: 0, exhale: 4, pause: 0, duration: 5, safetyNote: "If you feel dizzy, return to normal breathing." },
    selfCompassionPrompt: "Just breathe. That's enough right now.",
  },
  {
    key: "breathing_bodyscan",
    type: "breathing",
    phase: 1,
    title: "Body Scan Breath",
    description: "Connect breath with body awareness. Scan from head to toe as you breathe.",
    xpReward: 50,
    estimatedMinutes: 7,
    symptomTags: ["fatigue", "balance"],
    breathingPattern: { name: "Body Scan Breath", inhale: 4, hold: 2, exhale: 4, pause: 2, duration: 7, safetyNote: "If concentration is difficult, just focus on breathing naturally." },
  },
  {
    key: "breathing_discomfort",
    type: "breathing",
    phase: 1,
    title: "Sitting With Discomfort",
    description: "Box breathing to build tolerance for difficult moments. From Chapter 3.",
    xpReward: 50,
    estimatedMinutes: 8,
    bookChapterRef: 3,
    symptomTags: ["emotional"],
    breathingPattern: { name: "Sitting With Discomfort", inhale: 4, hold: 4, exhale: 4, pause: 4, duration: 8, safetyNote: "If the hold feels too long, reduce to 2 seconds." },
  },
  {
    key: "breathing_478",
    type: "breathing",
    phase: 1,
    title: "4-7-8 Relaxation",
    description: "A calming pattern perfect for sleep or anxiety. Andrew Weil's classic technique.",
    xpReward: 50,
    estimatedMinutes: 8,
    symptomTags: ["fatigue", "emotional"],
    breathingPattern: { name: "4-7-8 Relaxation", inhale: 4, hold: 7, exhale: 8, pause: 0, duration: 8, safetyNote: "This is a calming pattern. Perfect before sleep." },
  },

  // Challenge Quests - Phase 1
  {
    key: "cold_first",
    type: "cold",
    phase: 1,
    title: "Gentle Cool Water",
    description: "End your shower with 30 seconds of cool water. Focus on sensory awareness.",
    xpReward: 60,
    estimatedMinutes: 5,
    symptomTags: [],
    challenge: { type: "cold", name: "Gentle Cool Water", description: "End your shower with 30 seconds of cool (not cold) water. Focus on sensory awareness.", duration: "30 seconds", intensity: "gentle", safetyNote: "Skip if you have temperature sensitivity issues." },
  },
  {
    key: "rest_intentional",
    type: "rest",
    phase: 1,
    title: "Intentional Rest",
    description: "Three 10-minute breaks today. No phone, no stimulation. Rest IS recovery.",
    xpReward: 40,
    estimatedMinutes: 30,
    symptomTags: ["fatigue", "cognitive_fog"],
    challenge: { type: "rest", name: "Intentional Rest", description: "Take three 10-minute rest breaks today. No phone, no stimulation.", duration: "3 × 10 minutes", intensity: "gentle", safetyNote: "Rest is productive. Your brain heals during downtime." },
  },
  {
    key: "cold_oneminute",
    type: "cold",
    phase: 1,
    title: "One Minute Mark",
    description: "60 seconds of cool water exposure. Notice your body's response.",
    xpReward: 60,
    estimatedMinutes: 5,
    symptomTags: [],
    challenge: { type: "cold", name: "One Minute Mark", description: "60 seconds of cool water exposure. Notice your body's response.", duration: "60 seconds", intensity: "moderate", safetyNote: "This is about awareness, not endurance." },
  },
  {
    key: "physical_walk",
    type: "physical",
    phase: 1,
    title: "Daily Walk",
    description: "A 10-minute walk. Focus on each step, not the destination.",
    xpReward: 50,
    estimatedMinutes: 10,
    symptomTags: ["balance", "fatigue"],
    challenge: { type: "physical", name: "Daily Walk", description: "Take a 10-minute walk. Focus on each step, not the destination.", duration: "10 minutes", intensity: "gentle", safetyNote: "Start with 5 minutes if 10 feels like too much." },
  },

  // Reflection Quests - Phase 1
  {
    key: "reflection_moment",
    type: "reflection",
    phase: 1,
    title: "The Moment That Changed Everything",
    description: "Reflect on your turning point. Write freely about the moment your journey began.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: [],
    reflectionPrompt: "What moment changed everything for you? How do you feel about it now?",
  },
  {
    key: "reflection_fog",
    type: "reflection",
    phase: 1,
    title: "Sitting in the Fog",
    description: "Name the confusion and accept it. What does your fog look like?",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: ["cognitive_fog", "memory"],
    reflectionPrompt: "What fog am I sitting in right now? Can I describe it without fighting it?",
  },
  {
    key: "reflection_fear",
    type: "reflection",
    phase: 1,
    title: "Facing What Scares Me",
    description: "Name one fear. Just looking at it is brave enough.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: ["emotional"],
    reflectionPrompt: "What am I afraid of facing? What's the smallest step I could take toward it?",
  },
  {
    key: "reflection_grateful",
    type: "reflection",
    phase: 1,
    title: "First Gratitude",
    description: "Find one thing to be grateful for, even in the ashes.",
    xpReward: 50,
    estimatedMinutes: 5,
    symptomTags: [],
    reflectionPrompt: "What one thing am I grateful for today, even if it's small?",
  },

  // Toolkit Quests - Phase 1
  {
    key: "toolkit_morning_routine",
    type: "toolkit",
    phase: 1,
    title: "Build a Morning Routine",
    description: "Create a simple 3-step morning anchor. Consistency builds recovery.",
    xpReward: 80,
    estimatedMinutes: 15,
    symptomTags: ["memory", "cognitive_fog", "fatigue"],
    toolkitSteps: [
      "Choose ONE thing to do first every morning (e.g., drink water, stretch, breathe)",
      "Choose a SECOND thing (e.g., gratitude note, short walk, healthy breakfast)",
      "Choose a THIRD thing (e.g., review today's goals, breathing exercise, journaling)",
      "Write these three steps down somewhere visible",
      "Commit to trying this for just 3 days",
    ],
  },
  {
    key: "toolkit_energy_budget",
    type: "toolkit",
    phase: 1,
    title: "Create Your Energy Budget",
    description: "Think of energy like a bank account. Plan your withdrawals and deposits.",
    xpReward: 80,
    estimatedMinutes: 15,
    symptomTags: ["fatigue"],
    toolkitSteps: [
      "Rate your current energy on a scale of 1-10",
      "List today's activities that DRAIN energy (work, social, thinking tasks)",
      "List activities that RESTORE energy (rest, nature, gentle movement)",
      "Assign each a cost (-1 to -5) or gain (+1 to +5)",
      "Plan your day so deposits balance withdrawals",
      "Leave a 'reserve' — never spend your last energy point",
    ],
  },
  {
    key: "toolkit_brain_break",
    type: "toolkit",
    phase: 1,
    title: "Brain Break Protocol",
    description: "Set up a system for taking brain breaks before you hit the wall.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: ["fatigue", "cognitive_fog"],
    toolkitSteps: [
      "Set a timer for every 25 minutes of focused activity",
      "When it rings: close your eyes, take 5 deep breaths",
      "Stand up and stretch or walk for 2 minutes",
      "Drink water",
      "Ask yourself: 'Do I need a longer break?' If yes, take 10-15 minutes",
    ],
  },

  // Echo Quests - Phase 1
  {
    key: "echo_read_ashes",
    type: "echo",
    phase: 1,
    title: "Echoes from the Ashes",
    description: "Read an anonymous story from a fellow survivor. You're not alone in this.",
    xpReward: 30,
    estimatedMinutes: 5,
    symptomTags: [],
    reflectionPrompt: "What resonated with you in this story? What would you want to say to this person?",
  },
  {
    key: "echo_share_spark",
    type: "echo",
    phase: 1,
    title: "Share Your Spark",
    description: "Share one moment of hope or strength from your journey. Your words can light another's path.",
    xpReward: 50,
    estimatedMinutes: 10,
    symptomTags: [],
    reflectionPrompt: "What's one moment of hope, strength, or unexpected beauty from your recovery journey?",
  },

  // ========================================
  // PHASE 2: THE FORGE (Rebuilding)
  // ========================================

  // Narrative Quests - Phase 2
  {
    key: "narrative_ch5",
    type: "narrative",
    phase: 2,
    title: "Choose Your Own Adventure",
    description: "Discovering Dr. Joe Dispenza and the power of choosing your own path.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 5,
    symptomTags: [],
    chapterPath: "/chapter-5",
    audioPath: "/audio/chapter5.mp3",
    quote: "I chose my own adventure after my traumatic brain injury.",
    manuscriptExcerpt: "Dr. Joe Dispenza's work showed me that our brains can reprogram themselves...",
    reflectionPrompt: "What adventure am I choosing for my life?",
    scienceNote: "Neuroplasticity means your brain can form new neural pathways at any age.",
  },
  {
    key: "narrative_ch6",
    type: "narrative",
    phase: 2,
    title: "The Roller Coaster",
    description: "The emotional whiplash of recovery — learning to surf the waves.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 6,
    symptomTags: ["emotional"],
    chapterPath: "/chapter-6",
    audioPath: "/audio/chapter6.mp3",
    quote: "Emotions are waves—we learn to surf, not fight.",
    manuscriptExcerpt: "The emotional roller coaster was real. One moment fine, the next completely overwhelmed...",
    reflectionPrompt: "What emotions am I experiencing right now? Can I name them without judging?",
    scienceNote: "Emotional dysregulation after TBI is normal. Awareness is the first step to regulation.",
  },
  {
    key: "narrative_ch7",
    type: "narrative",
    phase: 2,
    title: "Mind Games",
    description: "The cognitive battle — when simple tasks become mountains.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 7,
    symptomTags: ["cognitive_fog", "memory"],
    chapterPath: "/chapter-7",
    audioPath: "/audio/chapter7.mp3",
    quote: "The mind is not fixed—it grows with every challenge.",
    manuscriptExcerpt: "Concentration became my biggest challenge. Simple tasks felt impossible...",
    reflectionPrompt: "How has my thinking changed since I began?",
    scienceNote: "Cognitive training creates new neural connections. Consistency matters more than intensity.",
  },
  {
    key: "narrative_ch8",
    type: "narrative",
    phase: 2,
    title: "Nourishing the Body",
    description: "Taste distortion, nutrition challenges, and learning to feed recovery.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 8,
    symptomTags: ["taste_smell"],
    chapterPath: "/chapter-8",
    audioPath: "/audio/chapter8.mp3",
    quote: "The body heals when we give it what it needs.",
    manuscriptExcerpt: "My taste was distorted. Everything tasted like cardboard with a chemical aftertaste...",
    reflectionPrompt: "How am I nourishing my body and mind?",
    scienceNote: "Nutrition directly impacts brain recovery. Omega-3s and antioxidants support healing.",
  },
  {
    key: "narrative_ch9",
    type: "narrative",
    phase: 2,
    title: "The Business Dilemma",
    description: "Making impossible decisions with a foggy brain. Finding clarity in acceptance.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 9,
    symptomTags: ["cognitive_fog"],
    chapterPath: "/chapter-9",
    audioPath: "/audio/chapter9.mp3",
    quote: "Clarity comes not from certainty, but from acceptance.",
    manuscriptExcerpt: "My business had to change. Making decisions with a foggy brain was terrifying...",
    reflectionPrompt: "What decision am I avoiding, and why?",
    scienceNote: "Decision fatigue is real after TBI. Limiting choices reduces cognitive load.",
  },

  // Breathing Quests - Phase 2
  {
    key: "breathing_box",
    type: "breathing",
    phase: 2,
    title: "Box Breathing",
    description: "Used by Navy SEALs for focus. Four equal counts: in, hold, out, hold.",
    xpReward: 50,
    estimatedMinutes: 10,
    symptomTags: ["emotional", "cognitive_fog"],
    breathingPattern: { name: "Box Breathing", inhale: 4, hold: 4, exhale: 4, pause: 4, duration: 10, safetyNote: "Used by Navy SEALs for focus. Gentle yet powerful." },
  },
  {
    key: "breathing_wave",
    type: "breathing",
    phase: 2,
    title: "Wave Breath",
    description: "Let your breath flow like ocean waves. Perfect for emotional regulation.",
    xpReward: 50,
    estimatedMinutes: 10,
    symptomTags: ["emotional"],
    breathingPattern: { name: "Wave Breath", inhale: 5, hold: 0, exhale: 5, pause: 0, duration: 10, safetyNote: "Let your breath flow like waves. No force needed." },
  },
  {
    key: "breathing_focus",
    type: "breathing",
    phase: 2,
    title: "Focus Breath",
    description: "Sharpen your concentration with this triangular breathing pattern.",
    xpReward: 50,
    estimatedMinutes: 8,
    symptomTags: ["cognitive_fog"],
    breathingPattern: { name: "Focus Breath", inhale: 4, hold: 4, exhale: 4, pause: 0, duration: 8 },
  },
  {
    key: "breathing_energize",
    type: "breathing",
    phase: 2,
    title: "Energizing Breath",
    description: "Quick rhythmic breathing to boost energy when fatigue hits.",
    xpReward: 40,
    estimatedMinutes: 5,
    symptomTags: ["fatigue"],
    breathingPattern: { name: "Energizing Breath", inhale: 3, hold: 0, exhale: 3, pause: 0, duration: 5 },
  },
  {
    key: "breathing_clarity",
    type: "breathing",
    phase: 2,
    title: "Clarity Breath",
    description: "Extended breath holds for mental clarity and focus.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: ["cognitive_fog"],
    breathingPattern: { name: "Clarity Breath", inhale: 5, hold: 5, exhale: 5, pause: 0, duration: 10 },
  },

  // Challenge Quests - Phase 2
  {
    key: "cold_extended",
    type: "cold",
    phase: 2,
    title: "Extended Cool Exposure",
    description: "90 seconds of cool water. You're building tolerance and resilience.",
    xpReward: 70,
    estimatedMinutes: 5,
    symptomTags: [],
    challenge: { type: "cold", name: "Extended Cool Exposure", description: "90 seconds of cool water. You're building tolerance.", duration: "90 seconds", intensity: "moderate" },
  },
  {
    key: "cognitive_nback",
    type: "cognitive",
    phase: 2,
    title: "Gentle N-Back Training",
    description: "5 minutes of 1-Back training. Brain exercise, not a test.",
    xpReward: 60,
    estimatedMinutes: 5,
    symptomTags: ["cognitive_fog", "memory"],
    challenge: { type: "cognitive", name: "Gentle N-Back", description: "5 minutes of 1-Back training. This is brain exercise—not a test.", duration: "5 minutes", intensity: "gentle", safetyNote: "If you feel mental fatigue, stop. Rest is part of training." },
  },
  {
    key: "mindfulness_mood",
    type: "mindfulness",
    phase: 2,
    title: "Mood Tracking",
    description: "Notice and name your emotions 3 times today. No judgment, just awareness.",
    xpReward: 40,
    estimatedMinutes: 5,
    symptomTags: ["emotional"],
    challenge: { type: "mindfulness", name: "Mood Tracking", description: "Notice and name your emotions 3 times today. No judgment, just awareness.", duration: "Throughout day", intensity: "gentle" },
  },
  {
    key: "physical_nourish",
    type: "physical",
    phase: 2,
    title: "Mindful Nourishment",
    description: "Eat one meal mindfully today. Notice colors, textures, tastes.",
    xpReward: 40,
    estimatedMinutes: 20,
    symptomTags: ["taste_smell"],
    challenge: { type: "physical", name: "Nourishment Focus", description: "Today, eat one meal mindfully. Notice colors, textures, tastes.", duration: "One meal", intensity: "gentle" },
  },
  {
    key: "cognitive_decision",
    type: "cognitive",
    phase: 2,
    title: "One Decision Framework",
    description: "Make one small decision using a simple pros/cons list.",
    xpReward: 60,
    estimatedMinutes: 15,
    symptomTags: ["cognitive_fog"],
    challenge: { type: "cognitive", name: "One Decision", description: "Make one small decision today using a simple pros/cons list.", duration: "15 minutes", intensity: "moderate" },
  },

  // Reflection Quests - Phase 2
  {
    key: "reflection_adventure",
    type: "reflection",
    phase: 2,
    title: "Choosing My Adventure",
    description: "What path are you choosing? Write about the life you're building.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: [],
    reflectionPrompt: "What adventure am I choosing for my life? What's one small choice I can make today?",
  },
  {
    key: "reflection_emotions",
    type: "reflection",
    phase: 2,
    title: "Naming the Waves",
    description: "Identify and describe your emotional patterns without judgment.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: ["emotional"],
    reflectionPrompt: "What emotions am I experiencing right now? Can I name them without judging?",
  },
  {
    key: "reflection_thinking",
    type: "reflection",
    phase: 2,
    title: "Cognitive Changes",
    description: "Notice how your thinking has shifted. What improvements have you seen?",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: ["cognitive_fog"],
    reflectionPrompt: "How has my thinking changed since I began? What small improvements have I noticed?",
  },
  {
    key: "reflection_nourish",
    type: "reflection",
    phase: 2,
    title: "Body & Mind Nourishment",
    description: "How are you feeding your recovery? Body and mind together.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: ["taste_smell"],
    reflectionPrompt: "How am I nourishing my body and mind? What does my body need right now?",
  },
  {
    key: "reflection_decision",
    type: "reflection",
    phase: 2,
    title: "The Decision I'm Avoiding",
    description: "Name the decision you've been putting off. What's the smallest step?",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: ["cognitive_fog"],
    reflectionPrompt: "What decision am I avoiding, and why? What's the smallest step I could take?",
  },

  // Toolkit Quests - Phase 2
  {
    key: "toolkit_memory_system",
    type: "toolkit",
    phase: 2,
    title: "Memory System Builder",
    description: "Create a personal system for the things you keep forgetting.",
    xpReward: 80,
    estimatedMinutes: 20,
    symptomTags: ["memory"],
    toolkitSteps: [
      "List the top 5 things you keep forgetting (keys, names, appointments, etc.)",
      "For each one, choose a strategy: phone alarm, sticky note, designated spot, or daily checklist",
      "Set up at least 2 of these systems RIGHT NOW",
      "Write a daily reminder to check your systems",
      "Review after 3 days: what's working? What needs adjusting?",
    ],
  },
  {
    key: "toolkit_push_rest",
    type: "toolkit",
    phase: 2,
    title: "Push vs Rest Decision Tree",
    description: "A simple framework for knowing when to push through and when to rest.",
    xpReward: 80,
    estimatedMinutes: 15,
    symptomTags: ["fatigue"],
    toolkitSteps: [
      "Ask: 'Is this essential today or can it wait?'",
      "Ask: 'Is my energy above 4 out of 10?'",
      "If YES to both: proceed, but set a timer for breaks",
      "If NO to either: reschedule or delegate without guilt",
      "After any activity: rate how you feel. Did you push too far?",
      "Write down your personal 'red flags' — the signs you've gone too far",
    ],
  },
  {
    key: "toolkit_smoothie",
    type: "toolkit",
    phase: 2,
    title: "Smoothie Recipe Builder",
    description: "Build a brain-boosting smoothie that works with taste/smell changes.",
    xpReward: 60,
    estimatedMinutes: 15,
    symptomTags: ["taste_smell"],
    toolkitSteps: [
      "Choose a base: banana, mango, or avocado (all mild, smooth textures)",
      "Add brain fuel: blueberries, spinach, or chia seeds (omega-3 rich)",
      "Add protein: Greek yogurt, protein powder, or nut butter",
      "Add liquid: coconut water, almond milk, or regular milk",
      "Blend and taste — what textures feel pleasant even with altered taste?",
      "Record your recipe and how it made you feel",
    ],
  },
  {
    key: "toolkit_pacing_intro",
    type: "toolkit",
    phase: 2,
    title: "Pacing Calendar Setup",
    description: "Create a weekly pacing calendar that balances activity and rest.",
    xpReward: 80,
    estimatedMinutes: 20,
    symptomTags: ["fatigue"],
    toolkitSteps: [
      "Get a blank weekly calendar (paper or digital)",
      "Mark your essential commitments first",
      "For each commitment, add a REST block before and after",
      "Color-code: green=rest, yellow=light activity, red=high energy tasks",
      "Ensure no more than 2 'red' blocks in a row",
      "Share this calendar with your support person if you have one",
    ],
  },

  // Echo Quests - Phase 2
  {
    key: "echo_forge_story",
    type: "echo",
    phase: 2,
    title: "Stories from the Forge",
    description: "Read how someone else rebuilt after their injury. Find shared strength.",
    xpReward: 30,
    estimatedMinutes: 5,
    symptomTags: [],
    reflectionPrompt: "What resonated with you? What strength did you see in their story?",
  },
  {
    key: "echo_encourage",
    type: "echo",
    phase: 2,
    title: "Send Encouragement",
    description: "Write a short message of support for a fellow traveler. Your words matter.",
    xpReward: 40,
    estimatedMinutes: 5,
    symptomTags: [],
    reflectionPrompt: "What would you want someone to say to you on your hardest day?",
  },

  // ========================================
  // PHASE 3: THE ASCENT (Independence & Inner Work)
  // ========================================

  // Narrative Quests - Phase 3
  {
    key: "narrative_ch10",
    type: "narrative",
    phase: 3,
    title: "A New Chapter",
    description: "Post-concussion syndrome diagnosis — finally, an explanation. A turning point.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 10,
    symptomTags: [],
    chapterPath: "/chapter-10",
    audioPath: "/audio/chapter10.mp3",
    quote: "Every ending is a beginning in disguise.",
    manuscriptExcerpt: "Post-concussion syndrome diagnosis changed everything. Finally, an explanation...",
    reflectionPrompt: "What new chapter is beginning in my life?",
    scienceNote: "Cold exposure releases norepinephrine, improving mood and focus.",
  },
  {
    key: "narrative_ch11",
    type: "narrative",
    phase: 3,
    title: "The Inner Work",
    description: "Discovering 'the observer' — Eckhart Tolle's wisdom applied to TBI recovery.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 11,
    symptomTags: [],
    chapterPath: "/chapter-11",
    audioPath: "/audio/chapter11.mp3",
    quote: "The observer, the silent witness—the part of me that can watch without getting swept away.",
    manuscriptExcerpt: "Eckhart Tolle's words resonated deeply. The concept of 'the observer' changed how I saw my thoughts...",
    reflectionPrompt: "Who is the observer behind my thoughts?",
    scienceNote: "Mindfulness physically changes brain structure, increasing gray matter in areas related to self-awareness.",
  },
  {
    key: "narrative_ch12",
    type: "narrative",
    phase: 3,
    title: "Reclaiming Independence",
    description: "Driving again. Reclaiming the pieces of yourself you thought you'd lost.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 12,
    symptomTags: ["balance", "vertigo"],
    chapterPath: "/chapter-12",
    audioPath: "/audio/chapter12.mp3",
    quote: "Independence is not about doing it alone—it's about choosing your path.",
    manuscriptExcerpt: "Driving again felt like reclaiming a piece of myself that I thought I'd lost...",
    reflectionPrompt: "What independence have I reclaimed?",
    scienceNote: "Regaining abilities builds confidence and creates positive neural associations.",
  },
  {
    key: "narrative_ch13",
    type: "narrative",
    phase: 3,
    title: "The Power of Gratitude",
    description: "Bailey's report card and the small moments that matter most.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 13,
    symptomTags: [],
    chapterPath: "/chapter-13",
    audioPath: "/audio/chapter13.mp3",
    quote: "Gratitude turns what we have into enough.",
    manuscriptExcerpt: "Bailey's report card reminded me of what really matters. The small moments are everything...",
    reflectionPrompt: "What unexpected blessings has this journey brought?",
    scienceNote: "Gratitude practice physically rewires the brain toward positive thinking patterns.",
  },

  // Breathing Quests - Phase 3
  {
    key: "breathing_advanced_box",
    type: "breathing",
    phase: 3,
    title: "Advanced Box Breathing",
    description: "Extended box breathing with 5-count holds. Building deeper capacity.",
    xpReward: 60,
    estimatedMinutes: 12,
    symptomTags: [],
    breathingPattern: { name: "Advanced Box", inhale: 5, hold: 5, exhale: 5, pause: 5, duration: 12 },
  },
  {
    key: "breathing_observer",
    type: "breathing",
    phase: 3,
    title: "Observer Breath",
    description: "Long exhale breathing paired with observer awareness. Watch thoughts pass.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: [],
    breathingPattern: { name: "Observer Breath", inhale: 6, hold: 0, exhale: 8, pause: 0, duration: 10 },
  },
  {
    key: "breathing_power",
    type: "breathing",
    phase: 3,
    title: "Power Breath",
    description: "Extended hold for building inner strength and confidence.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: [],
    breathingPattern: { name: "Power Breath", inhale: 4, hold: 7, exhale: 8, pause: 0, duration: 10 },
  },
  {
    key: "breathing_heart",
    type: "breathing",
    phase: 3,
    title: "Heart-Opening Breath",
    description: "A pattern designed to open the heart for gratitude and compassion.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: ["emotional"],
    breathingPattern: { name: "Heart-Opening Breath", inhale: 4, hold: 4, exhale: 6, pause: 2, duration: 10 },
  },

  // Challenge Quests - Phase 3
  {
    key: "cold_progression",
    type: "cold",
    phase: 3,
    title: "Cold Progression",
    description: "2 minutes cold water. Feel the transformation happening.",
    xpReward: 80,
    estimatedMinutes: 5,
    symptomTags: [],
    challenge: { type: "cold", name: "Cold Progression", description: "2 minutes cold water. Feel the transformation.", duration: "2 minutes", intensity: "progressive" },
  },
  {
    key: "mindfulness_journaling",
    type: "mindfulness",
    phase: 3,
    title: "Extended Journaling",
    description: "15 minutes of freeform writing. Let thoughts flow without editing.",
    xpReward: 60,
    estimatedMinutes: 15,
    symptomTags: [],
    challenge: { type: "mindfulness", name: "Extended Journaling", description: "15 minutes of freeform writing. Let thoughts flow without editing.", duration: "15 minutes", intensity: "moderate" },
  },
  {
    key: "physical_capability",
    type: "physical",
    phase: 3,
    title: "Capability Celebration",
    description: "Do one thing today you couldn't do a month ago. Celebrate it.",
    xpReward: 70,
    estimatedMinutes: 15,
    symptomTags: [],
    challenge: { type: "physical", name: "Capability Celebration", description: "Do one thing today you couldn't do a month ago. Celebrate it.", duration: "Variable", intensity: "progressive" },
  },
  {
    key: "mindfulness_gratitude_expand",
    type: "mindfulness",
    phase: 3,
    title: "Gratitude Expansion",
    description: "Write three things you're grateful for with rich, specific detail.",
    xpReward: 50,
    estimatedMinutes: 10,
    symptomTags: [],
    challenge: { type: "mindfulness", name: "Gratitude Expansion", description: "Write three things you're grateful for with rich detail. Why do they matter?", duration: "10 minutes", intensity: "gentle" },
  },

  // Reflection Quests - Phase 3
  {
    key: "reflection_newchapter",
    type: "reflection",
    phase: 3,
    title: "My New Chapter",
    description: "What story are you ready to write? Envision the chapter beginning now.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: [],
    reflectionPrompt: "What new chapter is beginning in my life? What story am I ready to write?",
  },
  {
    key: "reflection_observer",
    type: "reflection",
    phase: 3,
    title: "Meeting the Observer",
    description: "Who watches your thoughts? Explore the awareness behind the noise.",
    xpReward: 70,
    estimatedMinutes: 15,
    symptomTags: [],
    reflectionPrompt: "What truth about myself am I discovering? Who is the observer behind my thoughts?",
  },
  {
    key: "reflection_independence",
    type: "reflection",
    phase: 3,
    title: "Independence Reclaimed",
    description: "What can you do now that you couldn't before? Celebrate every win.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: [],
    reflectionPrompt: "What independence have I reclaimed? What's still waiting for me?",
  },
  {
    key: "reflection_blessings",
    type: "reflection",
    phase: 3,
    title: "Unexpected Blessings",
    description: "What gifts came from struggle? Find the gold in the ashes.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: [],
    reflectionPrompt: "What unexpected blessings has this journey brought? What gifts came from struggle?",
  },

  // Toolkit Quests - Phase 3
  {
    key: "toolkit_pacing_calendar",
    type: "toolkit",
    phase: 3,
    title: "Advanced Pacing Calendar",
    description: "Refine your pacing system with weekly energy reviews and adjustments.",
    xpReward: 80,
    estimatedMinutes: 20,
    symptomTags: ["fatigue"],
    toolkitSteps: [
      "Review your pacing calendar from the last week",
      "Mark days where you over-exerted (crashed after)",
      "Mark days where energy was well-managed",
      "What patterns do you notice?",
      "Adjust next week's plan based on these insights",
      "Set one boundary you'll practice this week (saying no, delegating, etc.)",
    ],
  },
  {
    key: "toolkit_weekly_review",
    type: "toolkit",
    phase: 3,
    title: "Weekly Energy Review",
    description: "A structured review of your week's energy patterns and recovery progress.",
    xpReward: 70,
    estimatedMinutes: 15,
    symptomTags: ["fatigue"],
    toolkitSteps: [
      "Rate this week's overall energy (1-10)",
      "What was your highest energy day? What made it good?",
      "What was your lowest energy day? What drained you?",
      "Did you use your brain break protocol? How often?",
      "One thing to keep doing next week",
      "One thing to change next week",
    ],
  },
  {
    key: "toolkit_observer_practice",
    type: "toolkit",
    phase: 3,
    title: "Observer Moment Practice",
    description: "A daily practice of stepping back and observing your thoughts without attachment.",
    xpReward: 70,
    estimatedMinutes: 10,
    symptomTags: ["emotional"],
    toolkitSteps: [
      "Set 3 random alarms during the day",
      "When each alarm rings, PAUSE for 30 seconds",
      "Notice what you were thinking — don't judge it, just observe",
      "Name the emotion present (e.g., 'There is frustration')",
      "Take one deep breath and continue",
      "At day's end: write down what you noticed across all 3 pauses",
    ],
  },
  {
    key: "toolkit_independence_checklist",
    type: "toolkit",
    phase: 3,
    title: "Independence Milestone Tracker",
    description: "Track and celebrate the things you've reclaimed since your injury.",
    xpReward: 60,
    estimatedMinutes: 15,
    symptomTags: [],
    toolkitSteps: [
      "List 5 things you could do before your injury that felt impossible after",
      "Mark which ones you can do now (even partially)",
      "For each one reclaimed: write HOW you got there",
      "For remaining items: what's one small step toward reclaiming them?",
      "Celebrate what you've reclaimed — this is huge!",
    ],
  },

  // Echo Quests - Phase 3
  {
    key: "echo_ascent_story",
    type: "echo",
    phase: 3,
    title: "Voices from the Ascent",
    description: "Read a story of someone finding independence after TBI.",
    xpReward: 30,
    estimatedMinutes: 5,
    symptomTags: [],
    reflectionPrompt: "What milestone in their story mirrors your own journey?",
  },
  {
    key: "echo_share_victory",
    type: "echo",
    phase: 3,
    title: "Share a Victory",
    description: "Share one thing you've reclaimed. Your win could inspire someone else.",
    xpReward: 50,
    estimatedMinutes: 10,
    symptomTags: [],
    reflectionPrompt: "What's one victory — big or small — that you want to share?",
  },
  {
    key: "echo_gratitude_exchange",
    type: "echo",
    phase: 3,
    title: "Gratitude Exchange",
    description: "Share what you're grateful for and read others' gratitude notes.",
    xpReward: 40,
    estimatedMinutes: 5,
    symptomTags: [],
    reflectionPrompt: "What are you most grateful for today?",
  },

  // ========================================
  // PHASE 4: THE SOAR (Legacy & Thriving)
  // ========================================

  // Narrative Quests - Phase 4
  {
    key: "narrative_ch14",
    type: "narrative",
    phase: 4,
    title: "The Universe's Message",
    description: "Wendy the Bowen therapist's insight — a wake-up call from life itself.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 14,
    symptomTags: [],
    chapterPath: "/chapter-14",
    audioPath: "/audio/chapter15.mp3",
    quote: "When we listen, life speaks clearly.",
    manuscriptExcerpt: "Wendy the Bowen therapist saw something I couldn't see—a wake-up call...",
    reflectionPrompt: "What message is life trying to send me?",
    scienceNote: "Meditation increases connectivity between brain regions, improving insight and intuition.",
  },
  {
    key: "narrative_ch15",
    type: "narrative",
    phase: 4,
    title: "Still Standing",
    description: "Proof of resilience. You're still here, still fighting, still standing.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 15,
    symptomTags: [],
    chapterPath: "/chapter-15",
    audioPath: "/audio/chapter16.mp3",
    quote: "We don't know how strong we are until being strong is the only choice.",
    reflectionPrompt: "What proof do I have that I am stronger than I thought?",
  },
  {
    key: "narrative_ch16",
    type: "narrative",
    phase: 4,
    title: "Looking Forward",
    description: "The future is written by those who dare to imagine it.",
    xpReward: 75,
    estimatedMinutes: 15,
    bookChapterRef: 16,
    symptomTags: [],
    chapterPath: "/chapter-16",
    audioPath: "/audio/chapter17.mp3",
    quote: "The future is written by those who dare to imagine it.",
    reflectionPrompt: "Who am I becoming through this transformation?",
  },
  {
    key: "narrative_ch17",
    type: "narrative",
    phase: 4,
    title: "The Torch Rekindled",
    description: "From the ashes, rising brighter than before. The phoenix complete.",
    xpReward: 100,
    estimatedMinutes: 15,
    bookChapterRef: 17,
    symptomTags: [],
    chapterPath: "/chapter-17",
    audioPath: "/audio/chapter18.mp3",
    quote: "From the ashes, we rise brighter than before.",
    reflectionPrompt: "What flame within me refuses to be extinguished?",
  },

  // Breathing Quests - Phase 4
  {
    key: "breathing_listening",
    type: "breathing",
    phase: 4,
    title: "Listening Breath",
    description: "Breathe and listen. An extended meditation pattern for insight.",
    xpReward: 60,
    estimatedMinutes: 15,
    symptomTags: [],
    breathingPattern: { name: "Listening Breath", inhale: 5, hold: 0, exhale: 5, pause: 3, duration: 15 },
  },
  {
    key: "breathing_resilience",
    type: "breathing",
    phase: 4,
    title: "Resilience Breath",
    description: "Extended hold pattern for building inner strength and resilience.",
    xpReward: 70,
    estimatedMinutes: 12,
    symptomTags: [],
    breathingPattern: { name: "Resilience Breath", inhale: 4, hold: 8, exhale: 8, pause: 0, duration: 12 },
  },
  {
    key: "breathing_vision",
    type: "breathing",
    phase: 4,
    title: "Vision Breath",
    description: "Extended box breathing for clarity and future visioning.",
    xpReward: 70,
    estimatedMinutes: 12,
    symptomTags: [],
    breathingPattern: { name: "Vision Breath", inhale: 5, hold: 5, exhale: 5, pause: 5, duration: 12 },
  },
  {
    key: "breathing_wimhof",
    type: "breathing",
    phase: 4,
    title: "Wim Hof Breathing",
    description: "Advanced rapid breathing protocol. Only for those who've built up gradually.",
    xpReward: 80,
    estimatedMinutes: 15,
    symptomTags: [],
    breathingPattern: { name: "Wim Hof Breathing", inhale: 2, hold: 0, exhale: 2, pause: 0, duration: 15, safetyNote: "Only attempt if comfortable with all previous breathing patterns." },
  },

  // Challenge Quests - Phase 4
  {
    key: "cold_peak",
    type: "cold",
    phase: 4,
    title: "Peak Cold Challenge",
    description: "4+ minutes cold exposure. You've earned this challenge.",
    xpReward: 100,
    estimatedMinutes: 10,
    symptomTags: [],
    challenge: { type: "cold", name: "Peak Cold Challenge", description: "4+ minutes cold exposure.", duration: "4+ minutes", intensity: "progressive" },
  },
  {
    key: "mindfulness_silent",
    type: "mindfulness",
    phase: 4,
    title: "Silent Sitting",
    description: "10 minutes of meditation without guidance. Just be present.",
    xpReward: 60,
    estimatedMinutes: 10,
    symptomTags: [],
    challenge: { type: "mindfulness", name: "Silent Sitting", description: "10 minutes of meditation without guidance. Just be present.", duration: "10 minutes", intensity: "moderate" },
  },
  {
    key: "mindfulness_vision_journal",
    type: "mindfulness",
    phase: 4,
    title: "Vision Journaling",
    description: "Write a letter to yourself one year from now.",
    xpReward: 80,
    estimatedMinutes: 15,
    symptomTags: [],
    challenge: { type: "mindfulness", name: "Vision Journaling", description: "Write a letter to yourself one year from now.", duration: "15 minutes", intensity: "moderate" },
  },
  {
    key: "cold_wimhof_protocol",
    type: "cold",
    phase: 4,
    title: "Wim Hof Protocol",
    description: "Breathing + 5 minute cold exposure. The ultimate resilience challenge.",
    xpReward: 120,
    estimatedMinutes: 20,
    symptomTags: [],
    challenge: { type: "cold", name: "Wim Hof Protocol", description: "Breathing + 5 minute cold exposure.", duration: "20 minutes total", intensity: "progressive" },
  },

  // Reflection Quests - Phase 4
  {
    key: "reflection_message",
    type: "reflection",
    phase: 4,
    title: "Life's Message",
    description: "What is life calling you toward? Listen deeply.",
    xpReward: 70,
    estimatedMinutes: 15,
    symptomTags: [],
    reflectionPrompt: "What message is life trying to send me? What am I being called toward?",
  },
  {
    key: "reflection_strength",
    type: "reflection",
    phase: 4,
    title: "Proof of Strength",
    description: "Catalog the evidence that you're stronger than you ever imagined.",
    xpReward: 70,
    estimatedMinutes: 15,
    symptomTags: [],
    reflectionPrompt: "What proof do I have that I am stronger than I thought? List at least 5 examples.",
  },
  {
    key: "reflection_becoming",
    type: "reflection",
    phase: 4,
    title: "Who I'm Becoming",
    description: "Describe the person you're transforming into through this journey.",
    xpReward: 70,
    estimatedMinutes: 15,
    symptomTags: [],
    reflectionPrompt: "Who am I becoming through this transformation? How am I different from who I was?",
  },
  {
    key: "reflection_flame",
    type: "reflection",
    phase: 4,
    title: "The Undying Flame",
    description: "What refuses to be extinguished inside you? Name your fire.",
    xpReward: 80,
    estimatedMinutes: 15,
    symptomTags: [],
    reflectionPrompt: "What flame within me refuses to be extinguished? What keeps me going?",
  },

  // Toolkit Quests - Phase 4
  {
    key: "toolkit_personal_protocol",
    type: "toolkit",
    phase: 4,
    title: "Design Your Personal Protocol",
    description: "Create your own daily/weekly protocol from everything you've learned.",
    xpReward: 100,
    estimatedMinutes: 30,
    symptomTags: [],
    toolkitSteps: [
      "Review all the practices you've tried on the Phoenix Path",
      "Choose your TOP 3 breathing patterns (the ones that work best for you)",
      "Choose your TOP 3 daily practices (walk, journal, gratitude, etc.)",
      "Choose 1 weekly challenge to maintain (cold, cognitive, etc.)",
      "Design your ideal daily schedule incorporating these",
      "Write it down as 'My Phoenix Protocol'",
      "Commit to following it for 2 weeks, then review and adjust",
    ],
  },
  {
    key: "toolkit_advocacy_story",
    type: "toolkit",
    phase: 4,
    title: "Write Your Advocacy Story",
    description: "Craft your recovery story to help others. Your experience is powerful.",
    xpReward: 100,
    estimatedMinutes: 30,
    symptomTags: [],
    toolkitSteps: [
      "Write the before: What was your life like before TBI?",
      "Write the during: What was the hardest moment of recovery?",
      "Write the after: What have you learned? Who are you now?",
      "What would you tell someone just starting their recovery?",
      "What one tool or practice made the biggest difference?",
      "Read it out loud to yourself. How does it feel to own your story?",
    ],
  },
  {
    key: "toolkit_mentor_guide",
    type: "toolkit",
    phase: 4,
    title: "Mentor's Guide",
    description: "Create a guide for supporting someone new to TBI recovery.",
    xpReward: 100,
    estimatedMinutes: 30,
    symptomTags: [],
    toolkitSteps: [
      "What are the top 5 things you wish someone had told you?",
      "What mistakes should new survivors avoid?",
      "What resources helped you most?",
      "How can family/friends best support recovery?",
      "Write a letter to 'Future Phoenix' — someone starting where you were",
    ],
  },
  {
    key: "toolkit_practice_review",
    type: "toolkit",
    phase: 4,
    title: "Practice Review & Essentials",
    description: "Review all practices and identify your non-negotiable essentials.",
    xpReward: 80,
    estimatedMinutes: 20,
    symptomTags: [],
    toolkitSteps: [
      "List every practice you've tried on this path",
      "Rate each: 'Essential', 'Helpful', or 'Not for me'",
      "Identify your top 5 'Essential' practices",
      "For each essential: why does it work for you?",
      "Create a simple weekly plan with just your essentials",
    ],
  },
  {
    key: "toolkit_pay_forward",
    type: "toolkit",
    phase: 4,
    title: "Pay It Forward Plan",
    description: "Create a plan for how you'll help others on their recovery journey.",
    xpReward: 100,
    estimatedMinutes: 20,
    symptomTags: [],
    toolkitSteps: [
      "What skills or insights from your recovery could help others?",
      "Choose one way to give back: mentoring, sharing your story, volunteering, creating content",
      "Set one specific goal (e.g., 'Share my story with one support group this month')",
      "Identify one organization you could connect with (Synapse, Brain Injury Australia, etc.)",
      "Write your first step and put it in your calendar",
    ],
  },

  // Echo Quests - Phase 4
  {
    key: "echo_soar_story",
    type: "echo",
    phase: 4,
    title: "Wings of Others",
    description: "Read stories of those who've soared after TBI. Feel the possibility.",
    xpReward: 30,
    estimatedMinutes: 5,
    symptomTags: [],
    reflectionPrompt: "How does their story change what you believe is possible?",
  },
  {
    key: "echo_share_chapter",
    type: "echo",
    phase: 4,
    title: "Share Your Phoenix Chapter",
    description: "Share your story with the community. Your journey could light someone's path.",
    xpReward: 80,
    estimatedMinutes: 15,
    symptomTags: [],
    reflectionPrompt: "What part of your story would be most helpful for someone in The Ashes right now?",
  },
  {
    key: "echo_legacy",
    type: "echo",
    phase: 4,
    title: "Leave Your Legacy",
    description: "Write a message that will be shown to future users starting their Phoenix Path.",
    xpReward: 80,
    estimatedMinutes: 10,
    symptomTags: [],
    reflectionPrompt: "If you could leave one message for every future person starting the Phoenix Path, what would it be?",
  },
];

// Helper functions
export const getQuestsForPhase = (phase: QuestPhase): QuestDefinition[] =>
  PHOENIX_QUESTS.filter(q => q.phase === phase);

export const getQuestByKey = (key: string): QuestDefinition | undefined =>
  PHOENIX_QUESTS.find(q => q.key === key);

export const getPhaseInfo = (phase: QuestPhase): PhaseInfo =>
  PHASES[phase - 1];

export const getQuestsByType = (type: QuestType): QuestDefinition[] =>
  PHOENIX_QUESTS.filter(q => q.type === type);

export const getQuestsBySymptom = (symptom: string): QuestDefinition[] =>
  PHOENIX_QUESTS.filter(q => q.symptomTags.includes(symptom));
